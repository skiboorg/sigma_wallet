"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[750],{63750:(e,a,l)=>{l.r(a),l.d(a,{default:()=>B});var t=l(61758),n=l(38734),i=l(58790),s=l(3388),o=l(19056),u=l(77474),c=l(95522),d=l(7757),r=l(38861),m=l(60455),v=l(59033),p=l(81750),g=l(8522)["Buffer"],b=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{u(t.next(e))}catch(a){i(a)}}function o(e){try{u(t["throw"](e))}catch(a){i(a)}}function u(e){e.done?l(e.value):n(e.value).then(s,o)}u((t=t.apply(e,a||[])).next())}))};const y={key:0,class:"q-mb-lg"},h=(0,t.Lk)("p",{class:"text-center text-weight-medium"},"или",-1),f={key:1,class:""},k=(0,t.Lk)("p",{class:"text-weight-medium"},"Информация о пользователе",-1),w={class:"row q-col-gutter-md q-mb-lg"},R={class:"col-6"},q={class:"col-6"},x=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),L={class:"q-mb-none text-caption"},A=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),C={class:"q-mb-none text-caption"},_=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),F={class:"q-mb-none text-caption"},K=(0,t.Lk)("p",{class:"text-negative"},"Верификация может занять до 1 минуты, пожалуйста не покидайте сраницу до получения ответа от сервера",-1),Q=(0,t.pM)({__name:"verify",setup(e){const a=(0,v.G)(),{toast:l,Icon:Q,Color:V}=(0,c.d)(),{registerPersonCertify:T,signTransaction:E}=(0,u.Z)(),P=(0,m.rd)();a.getOwnAssetByKey("1");let W=(0,n.KR)(!1),I=(0,n.KR)(null),X=(0,n.KR)(),B=(0,n.KR)(),D=(0,n.KR)();const S=()=>b(this,void 0,void 0,(function*(){p.log(X.value),I.value&&U(),X.value&&(yield G())})),U=()=>{const e=new FileReader;e.addEventListener("load",(()=>b(this,void 0,void 0,(function*(){X.value=e.result,yield G()}))),!1),I.value&&e.readAsText(I.value)},G=()=>b(this,void 0,void 0,(function*(){W.value=!W.value;const e=yield o.EraChain.Type.PersonHuman.parse(X.value);p.log(e),D.value=e,B.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+g.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},W.value=!W.value})),H=()=>b(this,void 0,void 0,(function*(){W.value=!W.value;const e=yield T(D.value);if(p.log(e),e.raw){yield r.era.broadcast(e.raw);l("Пользователь верифицирован",Q.success,V.success),yield P.back()}W.value=!W.value}));return(e,a)=>{const l=(0,t.g2)("q-file"),o=(0,t.g2)("q-input"),u=(0,t.g2)("q-img"),c=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(c,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(s.A,{title:"Верифицировать пользователя"},{default:(0,t.k6)((()=>[(0,n.R1)(D)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",y,[(0,t.bF)(l,{modelValue:(0,n.R1)(I),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(I)?I.value=e:I=e),accept:".txt",dense:"",label:"Выберите файл с RAW кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),h,(0,t.bF)(o,{class:"q-mb-md",outlined:"",modelValue:(0,n.R1)(X),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(X)?X.value=e:X=e),type:"textarea",dense:"",label:"Вставьте RAW код"},null,8,["modelValue"]),(0,t.bF)(d.A,{onClick:S,"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Проверить RAW"})])),(0,n.R1)(B)?((0,t.uX)(),(0,t.CE)("div",f,[k,(0,t.Lk)("div",w,[(0,t.Lk)("div",R,[(0,t.bF)(u,{src:(0,n.R1)(B).image},null,8,["src"])]),(0,t.Lk)("div",q,[x,(0,t.Lk)("p",L,(0,i.v_)((0,n.R1)(B).name),1),A,(0,t.Lk)("p",C,(0,i.v_)(0===(0,n.R1)(B).gender?"М":"Ж"),1),_,(0,t.Lk)("p",F,(0,i.v_)(new Date((0,n.R1)(B).birthday).toLocaleDateString()),1)])]),K,(0,t.bF)(d.A,{onClick:H,loading:(0,n.R1)(W),"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Верифицировать"},null,8,["loading"])])):(0,t.Q3)("",!0)])),_:1})])),_:1})}}});var V=l(33177),T=l(68433),E=l(68926),P=l(65287),W=l(98582),I=l.n(W);const X=Q,B=X;I()(Q,"components",{QPage:V.A,QFile:T.A,QInput:E.A,QImg:P.A})}}]);