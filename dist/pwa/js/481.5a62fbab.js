"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[481],{69481:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});var t=a(61758),o=a(38734),u=a(58790),n=a(3388),s=a(7757),r=a(41640),d=a(60455),i=a(77854),c=a(59033),v=a(39713),p=a(95522),_=a(10577),b=a(2177),f=function(e,l,a,t){function o(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,u){function n(e){try{r(t.next(e))}catch(l){u(l)}}function s(e){try{r(t["throw"](e))}catch(l){u(l)}}function r(e){e.done?a(e.value):o(e.value).then(n,s)}r((t=t.apply(e,l||[])).next())}))};const y={key:0},m=(0,t.Lk)("p",{class:"text-bold no-margin"},"Приватный раунд",-1),g={class:"absolute-full flex flex-center"},k={class:"text-bold"},R={class:"text-bold"},x={class:"text-bold"},w={key:0,class:"text-bold"},F={key:1,class:"q-pa-md"},h=(0,t.Lk)("p",null,"Введите реферальный код пригласителя",-1),A=(0,t.pM)({__name:"taxi",setup(e){const{p2pUser:l,getP2PUser:a}=(0,r.P)(),{address:A,allAssets:C}=(0,c.G)(),{rupayStats:q}=(0,_.u)(),{toast:K,Icon:T,Color:E}=(0,p.d)(),L=((0,d.lq)(),(0,o.KR)({}),(0,o.KR)("main"),(0,o.KR)(0),(0,o.KR)(0)),P=((0,o.KR)([]),(0,o.KR)(!1)),U=(0,o.KR)(null),V=(0,o.KR)(),B=()=>f(this,void 0,void 0,(function*(){P.value=!P.value;const e=yield i.rupayApi.post("/api/p2p/save_code",{wallet:A,used_ref_code:U.value});e.data.success?(K(e.data.message,T.info,E.info),yield a()):K(e.data.message,T.error,E.error),P.value=!P.value})),Q=(0,t.EW)((()=>{var e,l,a;if(L.value){let t=parseFloat(parseFloat(null===(e=V.value)||void 0===e?void 0:e.buy_course)+parseFloat((null===(l=V.value)||void 0===l?void 0:l.buy_course)*(null===(a=V.value)||void 0===a?void 0:a.buy_commission))).toFixed(2);return parseFloat(parseFloat(L.value)/t).toFixed(8)}}));(0,t.sV)((()=>{V.value=C.find((e=>1048648===e.key))}));const I=()=>f(this,void 0,void 0,(function*(){P.value=!P.value;const e=yield i.nodeApi.post("/api/data/create_payment_olf_ex",{wallet:A,type:"CARD",want_to_buy:Q.value,amount:L.value,currency:"CryptoTaxi",asset_id:1048648,redirect_url:b.env.PAYMENT_REDIRECT_URL,callback_url:"https://rupay.pro/api/data/p2play_url_result_cc"});P.value=!P.value,e.data.success?window.location.href=e.data.url:K(JSON.stringify(e.data.message),T.error,E.error)}));return(e,a)=>{const r=(0,t.g2)("q-badge"),d=(0,t.g2)("q-linear-progress"),i=(0,t.g2)("q-btn"),c=(0,t.g2)("q-input"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(n.A,{title:"CryptoTaxi"},{default:(0,t.k6)((()=>{var e,n,p,_;return[(null===(e=(0,o.R1)(l))||void 0===e?void 0:e.used_reffer_code)?((0,t.uX)(),(0,t.CE)("div",y,[m,(0,t.bF)(d,{size:"40px",value:parseFloat((0,o.R1)(q).total_crypto_taxi)/2e8,color:"primary",class:"q-mb-md"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",g,[(0,t.bF)(r,{color:"accent","text-color":"primary",class:"text-bold q-pa-sm",label:`${(0,o.R1)(q).total_crypto_taxi} / 20млн`},null,8,["label"])])])),_:1},8,["value"]),(0,t.Lk)("p",k,"Количество реффералов в 1й линии: "+(0,u.v_)(null===(n=(0,o.R1)(l))||void 0===n?void 0:n.first_line_count),1),(0,t.Lk)("p",R,[(0,t.eW)("Ваш реферальный код: "+(0,u.v_)(null===(p=(0,o.R1)(l))||void 0===p?void 0:p.own_reffer_code)+" ",1),(0,t.bF)(i,{color:"blue-7","text-color":"dark",onClick:a[0]||(a[0]=e=>{var a;return(0,o.R1)(v.$r)(null===(a=(0,o.R1)(l))||void 0===a?void 0:a.own_reffer_code,"Код скопирован")}),round:"",dense:"",unelevated:"",icon:"las la-clipboard"})]),(0,t.Lk)("p",x,"Курс покупки: "+(0,u.v_)(null===(_=V.value)||void 0===_?void 0:_.buy_course)+" RUB",1),(0,t.bF)(c,{modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),type:"number",dense:"",label:"Введите сумму пополнения в RUB",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),Q.value?((0,t.uX)(),(0,t.CE)("p",w,"Вы получите: "+(0,u.v_)(Q.value)+" CRYPTO TAXI TOKEN",1)):(0,t.Q3)("",!0),(0,t.bF)(s.A,{label:"Купить",loading:P.value,"no-caps":"",class:"full-width invertBtn",unelevated:"",onClick:I,disable:!Q.value||parseInt(L.value)<100},null,8,["loading","disable"])])):((0,t.uX)(),(0,t.CE)("div",F,[h,(0,t.bF)(c,{dense:"",modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,t.bF)(s.A,{label:"Сохранить",loading:P.value,"no-caps":"",class:"full-width invertBtn",unelevated:"",onClick:B,disable:!U.value},null,8,["loading","disable"])]))]})),_:1})])),_:1})}}});var C=a(33177),q=a(42876),K=a(44031),T=a(69001),E=a(68926),L=a(98582),P=a.n(L);const U=A,V=U;P()(A,"components",{QPage:C.A,QLinearProgress:q.A,QBadge:K.A,QBtn:T.A,QInput:E.A})}}]);