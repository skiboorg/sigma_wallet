"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[575],{55575:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ge});var l=n(61758),a=n(60002),s=n.n(a),o=n(38734),u=n(60455),i=n(58790),r=n(39713),d=n(95522),c=n(81750);const v={class:"pincode-panel"},p={class:"flex gap-4 justify-center q-mb-sm"},m=["data-number"],g=["data-number"],h={class:"text-center q-mb-sm text-weight-medium text-body1"},b={class:"pincode-wrapper"};var k,f;(function(e){e["init"]="init",e["repeat"]="repeat"})(k||(k={})),function(e){e["inputPassword"]="Введите пароль",e["createPassword"]="Придумайте пароль",e["repeatPassword"]="Подтвердите пароль"}(f||(f={}));const x=(0,l.pM)({__name:"PinCode",props:{digitsNumber:{type:Number,required:!0},needConfirm:{type:Boolean,required:!1,default:!1}},emits:["new-pincode","entered-pincode"],setup(e,{emit:t}){const{toast:n,Icon:a,Color:s}=(0,d.d)(),u=e,x=t,y=(0,o.KR)([1,2,3,4,5,6,7,8,9,"0"]),C=(0,o.KR)(k.init),w=(0,o.KR)([]),E=(0,o.KR)([]),X=(0,o.KR)(""),_=()=>{C.value===k.init?w.value.splice(w.value.length-1,1):E.value.splice(E.value.length-1,1)},K=e=>{C.value===k.init&&w.value.push(e),C.value===k.repeat&&E.value.push(e)};return(0,l.wB)(w,(e=>{e.length===u.digitsNumber&&(u.needConfirm?(y.value,C.value=k.repeat,X.value=f.repeatPassword):x("entered-pincode",w.value.join("")))}),{deep:!0}),(0,l.wB)(E,(e=>{if(e.length===u.digitsNumber){const e=(0,r.ww)(w.value,E.value);c.log(e),e?x("new-pincode",E.value.join("")):(n("Пароли не совпадают",a.error,s.error),C.value=k.init,w.value=[],E.value=[],X.value=f.createPassword,y.value)}}),{deep:!0}),(0,l.sV)((()=>{u.needConfirm?X.value=f.createPassword:X.value=f.inputPassword})),(t,n)=>{const a=(0,l.g2)("q-btn");return(0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",p,[e.needConfirm?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.digitsNumber,((e,t)=>((0,l.uX)(),(0,l.CE)("span",{class:"pin-input","data-number":C.value===k.init?w.value[t]?w.value[t]:"⚬":E.value[t]?E.value[t]:"⚬",key:t},null,8,m)))),128)):((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(e.digitsNumber,((e,t)=>((0,l.uX)(),(0,l.CE)("span",{class:"pin-input","data-number":w.value[t]?"*":"",key:t},null,8,g)))),128))]),(0,l.Lk)("p",h,(0,i.v_)(X.value),1),(0,l.Lk)("div",b,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{"no-caps":"",rounded:"",color:"dark",size:"16px",class:(0,i.C4)(["number",{hidden:10===e}]),onClick:t=>K(e),key:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e),1)])),_:2},1032,["class","onClick"])))),128)),(0,l.bF)(a,{"no-caps":"",rounded:"",color:"dark",size:"16px",class:"number",onClick:_,icon:"las la-backspace"})])])}}});var y=n(12807),C=n(69001),w=n(98582),E=n.n(w);const X=(0,y.A)(x,[["__scopeId","data-v-8c524464"]]),_=X;E()(x,"components",{QBtn:C.A});var K=n(40364),q=n(7711),F=n(7757),A=n(59033),L=n(77474),N=n(3388),P=n(81750),Q=function(e,t,n,l){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{i(l.next(e))}catch(t){s(t)}}function u(e){try{i(l["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):a(e.value).then(o,u)}i((l=l.apply(e,t||[])).next())}))};const R=(0,l.Lk)("p",{class:"text-center text-h4 q-mb-lg"},"Вход",-1),W={key:0,class:"flex column flex-col justify-center items-center"},I={key:1},V=(0,l.Lk)("p",null,"Введите вашу seed-фразу для восстановления доступа к аккаунту. ",-1),j={key:0,class:"text-center"},M={key:0,class:"text-negative"},B={class:"flex column q-gutter-sm"};var S;(function(e){e[e["hashExists"]=0]="hashExists",e[e["hashNotExists"]=1]="hashNotExists"})(S||(S={}));const T=(0,l.pM)({__name:"Login",emits:["need-register"],setup(e,{emit:t}){const n=K.A.get("hash"),a=(0,A.G)(),{toast:s,Icon:i,Color:c}=(0,d.d)(),{addAddress:v}=(0,L.Z)(),p=(0,o.KR)(null),m=(0,o.KR)(S.hashExists),g=(0,u.rd)(),h=(0,o.Kh)({seed:null,password:null}),b=(0,o.Kh)({hash:null,password:null}),k=()=>{P.log("blur");const e=/^[A-Za-z0-9]+$/;if(!e.test(h.seed))return!1;p.value=[43,44,86,87,88].includes(h.seed.length)},f=e=>Q(this,void 0,void 0,(function*(){a.setSeed(e),yield v(),yield a.initWallet(),yield g.push("/")})),x=e=>Q(this,void 0,void 0,(function*(){h.password=e,(0,r.n1)(h),yield f(h.seed)})),y=e=>Q(this,void 0,void 0,(function*(){b.hash=n,b.password=e;const t=(0,r.rW)(b);t?(P.log("good"),yield f(t)):s("Пароль неверный",i.error,c.error)}));return(0,l.KC)((()=>{m.value=n?S.hashExists:S.hashNotExists})),(e,t)=>{const n=(0,l.gN)("auto-animate");return(0,l.uX)(),(0,l.CE)(l.FK,null,[R,(0,l.bo)(((0,l.uX)(),(0,l.Wv)(N.A,{cls:"text-center"},{default:(0,l.k6)((()=>[m.value===S.hashExists?((0,l.uX)(),(0,l.CE)("div",W,[(0,l.bF)(_,{"digits-number":4,class:"q-mb-md",onEnteredPincode:y}),(0,l.bF)(F.A,{label:"Забыл пароль","text-color":"negative",onClick:(0,o.R1)(a).logout},null,8,["onClick"])])):(0,l.Q3)("",!0),m.value===S.hashNotExists?((0,l.uX)(),(0,l.CE)("div",I,[V,p.value?((0,l.uX)(),(0,l.Wv)(_,{key:1,"digits-number":4,"need-confirm":"",onNewPincode:x})):((0,l.uX)(),(0,l.CE)("div",j,[(0,l.bF)(q.A,{type:"textarea",modelValue:h.seed,"onUpdate:modelValue":t[0]||(t[0]=e=>h.seed=e),label:"Seed-фраза"},null,8,["modelValue"]),!1===p.value?((0,l.uX)(),(0,l.CE)("p",M,"Неверный сид")):(0,l.Q3)("",!0)])),(0,l.Lk)("div",B,[h.seed?((0,l.uX)(),(0,l.Wv)(F.A,{key:0,rounded:"",color:"positive",onClick:k,label:"Проверить сид"})):(0,l.Q3)("",!0),(0,l.bF)(F.A,{rounded:"",color:"dark",onClick:t[1]||(t[1]=t=>e.$router.back()),label:"Назад"})])])):(0,l.Q3)("",!0)])),_:1})),[[n]])],64)}}}),Z=T,z=Z;var U=function(e,t,n,l){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{i(l.next(e))}catch(t){s(t)}}function u(e){try{i(l["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):a(e.value).then(o,u)}i((l=l.apply(e,t||[])).next())}))};const $={class:"text-center text-h4 q-mb-lg"},G={key:0,class:"flex flex-col gap-2"},H=["innerHTML"],D={key:0,class:"text-center full-width"},J={key:1},O={key:2},Y=(0,l.Lk)("p",{class:"text-bold text-overline no-margin"}," Ваш сид :",-1),ee={class:"no-margin text-caption"},te={class:"flex justify-center"},ne=(0,l.Lk)("p",{class:""},"Ваша резервная фраза (seed-ключ) - это единственный способ восстановить доступ к вашему аккаунту.",-1),le=(0,l.Lk)("p",{class:"text-caption text-yellow-0 no-margin"},"Надежно сохраните ее, желательно на бумаге. Не передавайте эту фразу никому.",-1),ae={key:0,class:"flex justify-center"},se=(0,l.pM)({__name:"Register",setup(e){const{generateSeed:t}=(0,L.Z)(),n=(0,A.G)(),{addAddress:a}=(0,L.Z)(),s=(0,o.KR)(1),d=(0,o.KR)(!1),c=(0,u.rd)(),v=(0,o.Kh)({seed:null,password:null}),p=(0,o.KR)([{id:0,text:"Я согласен с тем, что доступ к сиду и ключам, имеется только у меня. При утере сида, доступ к счетам будет <strong>невозможно</strong> восстановить",agree:!1},{id:1,text:"Я согласен с тем, что <strong>при передаче сида</strong> третьим лицам, я могу <strong>лишиться всех средств</strong> находящихся на счетах",agree:!1},{id:2,text:'Я <strong>прочитал</strong> и согласен с  <a target="_blank" class="font-semibold underline" href="https://xxx.xxx/xxx.pdf">пользовательским соглашением</a> об общих условиях использования мобильного платежного приложения «International Payment»',agree:!1}]),m=(0,l.EW)((()=>{let e=!0;return p.value.forEach((t=>{e=e&&t.agree})),e})),g=e=>U(this,void 0,void 0,(function*(){s.value=3,v.password=e,v.seed=yield t()})),h=()=>{(0,r.$r)(v.seed,"Сид скопирован"),d.value=!0},b=()=>U(this,void 0,void 0,(function*(){(0,r.n1)(v),n.setSeed(v.seed),yield a(),yield n.initWallet(),yield c.push("/")}));return(e,t)=>{const n=(0,l.g2)("q-toggle"),a=(0,l.g2)("q-card-section"),o=(0,l.gN)("auto-animate");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("p",$,"Регистрация. Шаг "+(0,i.v_)(s.value),1),(0,l.bF)(N.A,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",null,[1===s.value?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",G,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(p.value,((e,t)=>((0,l.uX)(),(0,l.Wv)(n,{modelValue:e.agree,"onUpdate:modelValue":t=>e.agree=t,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",{class:"no-margin text-gold",innerHTML:e.text},null,8,H)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),m.value?((0,l.uX)(),(0,l.CE)("div",D,[(0,l.bF)(F.A,{class:"invertBtn",color:"positive",rounded:"",onClick:t[0]||(t[0]=e=>s.value=2),label:"Продолжить регистрацию"})])):(0,l.Q3)("",!0)])),[[o]]):(0,l.Q3)("",!0),2===s.value?((0,l.uX)(),(0,l.CE)("div",J,[(0,l.bF)(_,{"digits-number":4,"need-confirm":"",onNewPincode:g})])):(0,l.Q3)("",!0),3===s.value?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",O,[(0,l.bF)(a,{class:"bg-grey-invert q-mb-md"},{default:(0,l.k6)((()=>[Y,(0,l.Lk)("p",ee,(0,i.v_)(v.seed),1)])),_:1}),(0,l.Lk)("div",te,[(0,l.bF)(F.A,{rounded:"",color:"dark",onClick:h,class:"q-mb-md",label:"Скопировать сид"})]),ne,(0,l.bF)(a,{class:"bg-yellow-0 q-mb-md"},{default:(0,l.k6)((()=>[le])),_:1}),d.value?((0,l.uX)(),(0,l.CE)("div",ae,[(0,l.bF)(F.A,{rounded:"",color:"dark",onClick:b,label:"Продолжить"})])):(0,l.Q3)("",!0)])),[[o]]):(0,l.Q3)("",!0)])),[[o]])])),_:1})],64)}}});var oe=n(90449),ue=n(27066);const ie=se,re=ie;E()(se,"components",{QToggle:oe.A,QCardSection:ue.A});const de={class:"container"},ce={class:"flex column items-center justify-center q-mb-lg full-height"},ve=(0,l.Lk)("img",{class:"logo q-mb-md",src:s()},null,-1),pe=(0,l.pM)({__name:"index",setup(e){const t=(0,o.KR)("login");return t.value=(0,u.lq)().query.form,(e,n)=>{const a=(0,l.gN)("auto-animate");return(0,l.uX)(),(0,l.CE)("div",de,[(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ce,[ve,"login"===t.value?((0,l.uX)(),(0,l.Wv)(z,{key:0,onNeedRegister:n[0]||(n[0]=e=>t.value="register")})):(0,l.Q3)("",!0),"register"===t.value?((0,l.uX)(),(0,l.Wv)(re,{key:1})):(0,l.Q3)("",!0)])),[[a]])])}}}),me=pe,ge=me}}]);