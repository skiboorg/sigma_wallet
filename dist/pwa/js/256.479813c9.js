"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[256],{16256:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(61758),s=a(58790),i=a(38734),o=a(59033),l=a(77854),u=a(3388),r=a(63431),v=function(e,t,a,n){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(t){i(t)}}function l(e){try{u(n["throw"](e))}catch(t){i(t)}}function u(e){e.done?a(e.value):s(e.value).then(o,l)}u((n=n.apply(e,t||[])).next())}))};const d={class:"text-subtitle1 text-weight-bold q-mb-sm"},c={class:"flex no-wrap justify-between items-center"},p={style:{"max-width":"70%"}},g={class:"text-weight-medium ellipsis"},y={class:"text-grey-7 text-caption"},f={class:"text-right"},h={class:"text-caption text-grey-6"},m=(0,n.pM)({__name:"history",setup(e){const{address:t}=(0,o.G)(),a=(0,i.KR)([]),m=(0,i.KR)(""),k=(0,i.KR)(!1),x=(0,i.KR)(!0),b=(e="",a=25)=>v(this,void 0,void 0,(function*(){var n,s;let i=`/index/blockexplorer.json?q=${t}&lang=ru&search=addresses&forge=yes`;e&&(i+=`&pageKey=${e}&offset=${a}`);const o=yield l.scanApi.get(i),u=(null===(s=null===(n=o.data)||void 0===n?void 0:n.Transactions)||void 0===s?void 0:s.transactions)||{},r=Object.values(u);return{txArray:r,pageFromKey:o.data.pageFromKey||""}})),w=()=>v(this,void 0,void 0,(function*(){if(!k.value&&x.value){k.value=!0;try{const e=yield b(m.value,25),t=e.txArray;if(t.length){a.value.push(...t);const n=e.pageFromKey;n&&n!==m.value?m.value=n:x.value=!1}else x.value=!1}finally{k.value=!1}}})),_=(0,n.EW)((()=>{const e={};for(const t of a.value){const a=new Date(t.timestamp).toLocaleDateString("ru-RU");e[a]||(e[a]=[]),e[a].push(t)}return e}));return(0,n.KC)((()=>v(this,void 0,void 0,(function*(){yield w()})))),(e,t)=>{const a=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(a,{padding:""},{default:(0,n.k6)((()=>[(0,n.bF)(r.A,{loading:k.value,hasMore:x.value,onLoadMore:w},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(_.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"q-mb-md"},[(0,n.Lk)("div",d,(0,s.v_)(t),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e=>((0,n.uX)(),(0,n.Wv)(u.A,{key:e.signature,class:"q-pa-sm q-mb-sm bg-grey-1 rounded-borders"},{default:(0,n.k6)((()=>{var t;return[(0,n.Lk)("div",c,[(0,n.Lk)("div",p,[(0,n.Lk)("div",g,(0,s.v_)(e.title||e.type_name),1),(0,n.Lk)("div",y,(0,s.v_)(e.itemName),1)]),(0,n.Lk)("div",f,[(0,n.Lk)("div",{class:(0,s.C4)([(null===(t=e.amount)||void 0===t?void 0:t.startsWith("-"))?"text-negative":"text-positive","text-weight-bold"])},(0,s.v_)(e.amount),3),(0,n.Lk)("div",h,"#"+(0,s.v_)(e.block),1)])])]})),_:2},1024)))),128))])))),128))])),_:1},8,["loading","hasMore"])])),_:1})}}});var k=a(33177),x=a(98582),b=a.n(x);const w=m,_=w;b()(m,"components",{QPage:k.A})}}]);