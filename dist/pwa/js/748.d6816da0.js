"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[748],{22748:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Il});var t=a(61758),n=a(38734),s=a(58790),o=a(59033),u=a(41640);const r={key:0,class:"text-right"},i={class:"text-subtitle2 text-weight-bold no-margin"},d={class:"text-subtitle2 text-weight-bold no-margin"},c={class:"text-caption no-margin"},p={key:0},v={class:"text-caption no-margin"},f={class:"text-caption no-margin"},b={class:"text-caption no-margin"},m=(0,t.Lk)("p",{class:"text-caption no-margin"},"Тип оплаты ",-1),_={class:"full-width flex wrap gap-2"},k=(0,t.pM)({__name:"OfferCard",props:{offer:{}},setup(e){const{p2pUser:l}=(0,u.P)(),a=e,n=(0,t.EW)((()=>a.offer.user.wallet===(null===l||void 0===l?void 0:l.wallet)));return(e,l)=>{const a=(0,t.g2)("q-badge"),o=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(u,{flat:"",bordered:"",class:"overflow-hidden cursor-pointer",onClick:l[0]||(l[0]=l=>n.value?null:e.$router.push(`/p2p/offer/${e.offer.id}`))},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[n.value?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(a,{color:"positive",label:"Ваш оффер"})])):(0,t.Q3)("",!0),(0,t.Lk)("p",i,(0,s.v_)(`№${e.offer.id} Объем ${e.offer.amount} из ${e.offer.start_amount}`),1),(0,t.Lk)("p",d,"Стоимость "+(0,s.v_)(e.offer.course)+" ₽",1),(0,t.Lk)("p",c,[(0,t.eW)("Разместил "+(0,s.v_)(e.offer.user.fio?e.offer.user.fio:e.offer.user.wallet)+" ",1),e.offer.user.total_trades?((0,t.uX)(),(0,t.CE)("span",p,"("+(0,s.v_)(e.offer.user.total_trades)+" сделок)",1)):(0,t.Q3)("",!0)]),(0,t.Lk)("p",v,[e.offer.user.fio?((0,t.uX)(),(0,t.Wv)(a,{key:0,color:"positive",class:"q-mr-sm"},{default:(0,t.k6)((()=>[(0,t.eW)("Верифицирован")])),_:1})):((0,t.uX)(),(0,t.Wv)(a,{key:1,color:"negative",class:"q-mr-sm"},{default:(0,t.k6)((()=>[(0,t.eW)("Не верифицирован")])),_:1})),e.offer.user.is_online?((0,t.uX)(),(0,t.Wv)(a,{key:2,color:"positive",class:"q-mr-sm"},{default:(0,t.k6)((()=>[(0,t.eW)("В сети")])),_:1})):((0,t.uX)(),(0,t.Wv)(a,{key:3,color:"negative"},{default:(0,t.k6)((()=>[(0,t.eW)("Не в сети")])),_:1}))]),(0,t.Lk)("p",f,"Дата создания "+(0,s.v_)(new Date(e.offer.created_at).toLocaleDateString()),1),(0,t.Lk)("p",b,"Минимальный объем "+(0,s.v_)(e.offer.min_amount),1),m,(0,t.Lk)("div",_,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.offer.payment_types,(e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.id,class:"inline-block"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.label),1)])),_:2},1024)))),128))])])),_:1})])),_:1})}}});var g=a(97569),y=a(27066),F=a(44031),h=a(98582),q=a.n(h);const w=k,L=w;q()(k,"components",{QCard:g.A,QCardSection:y.A,QBadge:F.A});var x=a(39713),A=a(81750),W=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(t.next(e))}catch(l){s(l)}}function u(e){try{r(t["throw"](e))}catch(l){s(l)}}function r(e){e.done?a(e.value):n(e.value).then(o,u)}r((t=t.apply(e,l||[])).next())}))};const Q={class:"flex column gap-3"},V=(0,t.pM)({__name:"OffersList",props:{offers:{}},setup(e){const l=(0,n.KR)(0);return(0,t.sV)((()=>W(this,void 0,void 0,(function*(){l.value=(0,x.Rg)("p2p_tabs"),A.log((0,x.Rg)("p2p_tabs"))})))),(e,a)=>{const n=(0,t.g2)("q-scroll-area");return(0,t.uX)(),(0,t.Wv)(n,{style:(0,s.Tr)({height:l.value-110+"px"}),class:"full-width"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Q,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.offers,(e=>((0,t.uX)(),(0,t.Wv)(L,{offer:e,key:e.id},null,8,["offer"])))),128))])])),_:1},8,["style"])}}});var C=a(19600);const R=V,P=R;q()(V,"components",{QScrollArea:C.A});var X=a(24029),S=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(t.next(e))}catch(l){s(l)}}function u(e){try{r(t["throw"](e))}catch(l){s(l)}}function r(e){e.done?a(e.value):n(e.value).then(o,u)}r((t=t.apply(e,l||[])).next())}))};const $={class:"page-wrapper p2p-page full-height"},T={class:"full-height"},U={class:"flex gap-2"},K={class:"full-height",id:"p2p_tabs"},O=(0,t.Lk)("p",{class:"no-margin text-body1"},"Сортировка и фильтры",-1),E=(0,t.Lk)("p",{class:"text-caption q-mb-sm"},"Только выбранные платежные системы",-1),I=(0,t.Lk)("p",{class:"no-margin text-body1"},"Статистика",-1),D={class:"q-mb-sm"},M={class:"text-positive"},B={class:"text-negative"},z={class:"q-mb-sm"},j={class:"text-positive"},N={class:"text-negative"},G={class:"q-mb-sm"},H={class:"text-positive"},J={class:"text-negative"},Y=(0,t.Lk)("p",{class:"q-mb-sm"},"Сделок за сутки: 0",-1),Z={class:""},ee={class:"q-mb-sm"},le={class:"q-mb-sm"},ae={class:"q-mb-sm"},te={class:"text-positive"},ne={class:"no-margin"},se={class:"text-negative"},oe=(0,t.pM)({__name:"P2PTab",setup(e){const{assetsInP2P:l}=(0,o.G)(),{paymentMethods:a,getOffers:r}=(0,u.P)(),i=(0,u.P)(),d=(0,n.KR)("sellTab"),c=(0,n.KR)(),p=(0,n.KR)(),v=(0,n.KR)(!1),f=(0,n.KR)(!1),b=(0,n.KR)(!1),m=(0,n.KR)(!1),_=(0,n.KR)({ticked:[],expanded:[]}),k=(0,n.KR)([]),g=(0,n.KR)([{label:"Курсу (по возрастанию)",value:{order_by:"course",dir:"desc"}},{label:"Курсу (по убыванию)",value:{order_by:"course",dir:"asc"}},{label:"По минимальному обьему (по возрастанию)",value:{order_by:"min_amount",dir:"desc"}},{label:"По минимальному обьему (по убыванию)",value:{order_by:"p2p_filter_vol_down",dir:"asc"}}]),y=()=>{p.value=g.value[0],_.value.ticked=[],v.value=!1,f.value=!1,b.value=!1};function F(e){return S(this,void 0,void 0,(function*(){b.value=!1,"reset"===e&&y(),k.value=yield r(c.value.id,p.value.value.order_by,p.value.value.dir,_.value.ticked,v.value,f.value)}))}(0,t.sV)((()=>S(this,void 0,void 0,(function*(){c.value=l[0],y(),yield F("")}))));const h=e=>S(this,void 0,void 0,(function*(){c.value=e,yield F("reset")}));return(e,o)=>{const u=(0,t.g2)("q-btn"),r=(0,t.g2)("q-separator"),y=(0,t.g2)("q-tab"),q=(0,t.g2)("q-tabs"),w=(0,t.g2)("q-tab-panel"),L=(0,t.g2)("q-tab-panels"),x=(0,t.g2)("q-spinner-bars"),A=(0,t.g2)("q-inner-loading"),W=(0,t.g2)("q-card-section"),Q=(0,t.g2)("q-select"),V=(0,t.g2)("q-tree"),C=(0,t.g2)("q-checkbox"),R=(0,t.g2)("q-card"),S=(0,t.g2)("q-dialog"),oe=(0,t.gN)("touch-swipe"),ue=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",$,[(0,t.Lk)("div",T,[(0,t.Lk)("div",U,[(0,t.bF)(X.A,{isP2PList:"",assets:(0,n.R1)(l),needSelectFirstAsset:"",onAssetSelected:h},null,8,["assets"]),(0,t.bF)(u,{flat:"",icon:"las la-filter",padding:"sm",onClick:o[0]||(o[0]=e=>b.value=!0)}),(0,t.bF)(u,{flat:"",icon:"lar la-chart-bar",padding:"sm",onClick:o[1]||(o[1]=e=>m.value=!0)})])]),(0,t.Lk)("div",K,[(0,t.bF)(r,{style:{margin:"0 -8px"}}),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(q,{style:{margin:"0 -8px"},modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),"indicator-color":"",align:"justify","active-color":"","active-bg-color":""},{default:(0,t.k6)((()=>[(0,t.bF)(y,{"no-caps":"",class:"bg-transparent text-negative",name:"sellTab",label:`Продажа (${k.value.filter((e=>e.is_sell)).length})`},null,8,["label"]),(0,t.bF)(y,{"no-caps":"",class:"bg-transparent text-positive",name:"buyTab",label:`Покупка (${k.value.filter((e=>!e.is_sell)).length})`},null,8,["label"])])),_:1},8,["modelValue"])),[[oe]]),(0,t.bF)(r,{style:{margin:"0 -8px 8px"}}),(0,t.bF)(L,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),animated:""},{default:(0,t.k6)((()=>[(0,t.bF)(w,{name:"sellTab",class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(P,{"is-sell-list":"",offers:k.value.filter((e=>e.is_sell))},null,8,["offers"])])),_:1}),(0,t.bF)(w,{name:"buyTab",class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(P,{offers:k.value.filter((e=>!e.is_sell))},null,8,["offers"])])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(A,{showing:(0,n.R1)(i).loading},{default:(0,t.k6)((()=>[(0,t.bF)(x,{size:"32px"})])),_:1},8,["showing"])])]),(0,t.bF)(S,{modelValue:b.value,"onUpdate:modelValue":o[11]||(o[11]=e=>b.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(R,null,{default:(0,t.k6)((()=>[(0,t.bF)(W,{horizontal:"",class:"q-pa-sm items-center justify-between"},{default:(0,t.k6)((()=>[O,(0,t.bo)((0,t.bF)(u,{dense:"",flat:"",round:"",icon:"las la-times"},null,512),[[ue]])])),_:1}),(0,t.bF)(r),(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.bF)(Q,{dense:"",label:"Сортировать по",outlined:"",class:"q-mb-md","dropdown-icon":"las la-angle-down",behavior:"menu",options:g.value,modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=e=>p.value=e)},null,8,["options","modelValue"]),E,(0,n.R1)(a)?((0,t.uX)(),(0,t.Wv)(V,{key:0,nodes:(0,n.R1)(a),accordion:"","children-key":"types","node-key":"label",icon:"las la-angle-down",class:"q-mb-md","tick-strategy":"leaf",ticked:_.value.ticked,"onUpdate:ticked":o[5]||(o[5]=e=>_.value.ticked=e),expanded:_.value.expanded,"onUpdate:expanded":o[6]||(o[6]=e=>_.value.expanded=e)},null,8,["nodes","ticked","expanded"])):(0,t.Q3)("",!0),(0,t.bF)(C,{modelValue:v.value,"onUpdate:modelValue":o[7]||(o[7]=e=>v.value=e),label:"Только онлайн пользователи",class:"q-mb-none"},null,8,["modelValue"]),(0,t.bF)(C,{modelValue:f.value,"onUpdate:modelValue":o[8]||(o[8]=e=>f.value=e),label:"Только верифицированные",class:"q-mb-md"},null,8,["modelValue"]),(0,t.bF)(u,{dense:"",label:"Применить",onClick:o[9]||(o[9]=e=>F("filter")),unelevated:"","no-caps":"",color:"green-5",class:"full-width q-mb-md q-py-sm"}),(0,t.bF)(u,{dense:"",label:"Очистить",onClick:o[10]||(o[10]=e=>F("reset")),unelevated:"","no-caps":"",color:"grey-5",class:"full-width q-mb-md q-py-sm"})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(S,{modelValue:m.value,"onUpdate:modelValue":o[12]||(o[12]=e=>m.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(R,{class:"full-width"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{horizontal:"",class:"q-pa-sm items-center justify-between"},{default:(0,t.k6)((()=>[I,(0,t.bo)((0,t.bF)(u,{dense:"",flat:"",round:"",icon:"las la-times"},null,512),[[ue]])])),_:1}),(0,t.bF)(r),(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.Lk)("p",D,[(0,t.eW)(" За сутки: "),(0,t.Lk)("span",M,(0,s.v_)(c.value.daily_volume_byu),1),(0,t.eW)(" / "),(0,t.Lk)("span",B,(0,s.v_)(c.value.daily_volume_sell),1)]),(0,t.Lk)("p",z,[(0,t.eW)("За неделю: "),(0,t.Lk)("span",j,(0,s.v_)(c.value.weekly_volume_byu),1),(0,t.eW)(" / "),(0,t.Lk)("span",N,(0,s.v_)(c.value.weekly_volume_sell),1)]),(0,t.Lk)("p",G,[(0,t.eW)("За месяц: "),(0,t.Lk)("span",H,(0,s.v_)(c.value.monthly_volume_byu),1),(0,t.eW)(" / "),(0,t.Lk)("span",J,(0,s.v_)(c.value.monthly_volume_sell),1)]),Y,(0,t.Lk)("div",Z,[(0,t.Lk)("p",ee,"Сделок за неделю: "+(0,s.v_)(c.value.daily_trades),1),(0,t.Lk)("p",le,"Сделок за месяц: "+(0,s.v_)(c.value.monthly_trades),1),(0,t.Lk)("p",ae,[(0,t.eW)("Объем на покупку: "),(0,t.Lk)("span",te,(0,s.v_)(c.value.total_in_buy),1)]),(0,t.Lk)("p",ne,[(0,t.eW)("Объем на продажу: "),(0,t.Lk)("span",se,(0,s.v_)(c.value.total_in_sell),1)])])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});var ue=a(69001),re=a(37015),ie=a(64873),de=a(26721),ce=a(64082),pe=a(63815),ve=a(24264),fe=a(62669),be=a(57201),me=a(88515),_e=a(27417),ke=a(12225),ge=a(35724),ye=a(62769);const Fe=oe,he=Fe;q()(oe,"components",{QBtn:ue.A,QSeparator:re.A,QTabs:ie.A,QTab:de.A,QTabPanels:ce.A,QTabPanel:pe.A,QInnerLoading:ve.A,QSpinnerBars:fe.A,QDialog:be.A,QCard:g.A,QCardSection:y.A,QSelect:me.A,QTree:_e.A,QCheckbox:ke.A}),q()(oe,"directives",{TouchSwipe:ge.A,ClosePopup:ye.A});var qe=a(40702);const we=(0,t.Lk)("strong",null,"В сделке",-1),Le=(0,t.Lk)("br",null,null,-1),xe=(0,t.Lk)("strong",null,"Дата размещения",-1),Ae=(0,t.Lk)("br",null,null,-1),We=(0,t.Lk)("strong",null,"Просмотров",-1),Qe=(0,t.Lk)("br",null,null,-1),Ve=(0,t.Lk)("strong",null,"Объем",-1),Ce=(0,t.Lk)("br",null,null,-1),Re=(0,t.Lk)("strong",null,"Курс",-1),Pe=(0,t.Lk)("br",null,null,-1),Xe=(0,t.Lk)("strong",null,"Минимальный объем",-1),Se=(0,t.Lk)("br",null,null,-1),$e=(0,t.Lk)("strong",null,"Платежные системы",-1),Te=(0,t.Lk)("br",null,null,-1),Ue=(0,t.Lk)("br",null,null,-1),Ke=(0,t.Lk)("strong",null,"Условия",-1),Oe=(0,t.Lk)("br",null,null,-1),Ee=(0,t.Lk)("br",null,null,-1),Ie=(0,t.Lk)("br",null,null,-1),De={class:"q-gutter-md"},Me=(0,t.pM)({__name:"OwnOffers",props:{offers:{}},setup(e){const{deleteOffer:l}=(0,u.P)();return(e,a)=>{const o=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-separator"),r=(0,t.g2)("q-btn"),i=(0,t.g2)("q-card"),d=(0,t.g2)("q-expansion-item"),c=(0,t.g2)("q-list");return e.offers.length?((0,t.uX)(),(0,t.Wv)(i,{key:0,flat:"",bordered:"",class:"q-mb-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.eW)("Мои офферы")])),_:1}),(0,t.bF)(u),(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.offers,(e=>((0,t.uX)(),(0,t.Wv)(d,{clickable:"",group:"offers",label:`#${e.id} ${e.is_sell?"Продажа":"Покупка"} ${e.amount} ${e.asset.name}`,key:e.id,class:"item-no-padding",caption:`Курс ${e.course}`},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"bg-tab"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[we,(0,t.eW)(": "),(0,t.Lk)("span",{class:(0,s.C4)(["text-bold",e.is_in_trade?"text-negative":"text-positive"])},(0,s.v_)(e.is_in_trade?"Да":"Нет"),3),Le,xe,(0,t.eW)(": "+(0,s.v_)(new Date(e.created_at).toLocaleDateString()),1),Ae,We,(0,t.eW)(": "+(0,s.v_)(e.views),1),Qe,Ve,(0,t.eW)(": "+(0,s.v_)(e.amount),1),Ce,Re,(0,t.eW)(": "+(0,s.v_)(e.course)+" RUB",1),Pe,Xe,(0,t.eW)(": "+(0,s.v_)(e.min_amount),1),Se,$e,(0,t.eW)(":"),Te,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.payment_types,(e=>((0,t.uX)(),(0,t.CE)("span",{key:e.id},(0,s.v_)(e.label)+"  ",1)))),128)),Ue,Ke,(0,t.eW)(":"),Oe,(0,t.eW)(" "+(0,s.v_)(e.rules),1),Ee,Ie,(0,t.Lk)("div",De,[(0,t.bF)(r,{color:"negative",onClick:a=>(0,n.R1)(l)(e.id),"no-caps":"",unelevated:"",label:"Удалить"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","caption"])))),128))])),_:1})])),_:1})])),_:1})):(0,t.Q3)("",!0)}}});var Be=a(54514),ze=a(76986);const je=Me,Ne=je;q()(Me,"components",{QCard:g.A,QCardSection:y.A,QSeparator:re.A,QList:Be.A,QExpansionItem:ze.A,QBtn:ue.A});var Ge=a(7757);const He=(0,t.Lk)("strong",null,"Оффер №",-1),Je=(0,t.Lk)("br",null,null,-1),Ye=(0,t.Lk)("strong",null,"Дата создания сделки",-1),Ze=(0,t.Lk)("br",null,null,-1),el=(0,t.Lk)("br",null,null,-1),ll=(0,t.Lk)("strong",null,"Сумма сделки ",-1),al=(0,t.Lk)("br",null,null,-1),tl=(0,t.Lk)("br",null,null,-1),nl=(0,t.pM)({__name:"OwnTrades",props:{trades:{},title:{},user:{}},setup(e){return(e,l)=>{const a=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-separator"),o=(0,t.g2)("q-card"),u=(0,t.g2)("q-expansion-item"),r=(0,t.g2)("q-list");return e.trades.length?((0,t.uX)(),(0,t.Wv)(o,{key:0,flat:"",bordered:"",class:"q-mb-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.title),1)])),_:1}),(0,t.bF)(n),(0,t.bF)(a,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.trades,(l=>((0,t.uX)(),(0,t.Wv)(u,{clickable:"",group:"offers",class:"item-no-padding",label:`# ${l.id} - ${l.offer.is_sell?l.opponent.wallet===e.user.wallet?"Покупка":"Продажа":l.opponent.wallet===e.user.wallet?"Продажа":"Покупка"}\n                                ${l.asset_amount} ${l.offer.asset.name} `,"header-class":`${l.offer.is_sell?l.opponent.wallet===e.user.wallet?"text-positive":"text-negative":l.opponent.wallet===e.user.wallet?"text-negative":"text-positive"}\n                                ${l.asset_amount} ${l.offer.asset.name}`,key:l.id,caption:`Сумма сделки ${l.fiat_amount} ₽`},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"bg-tab"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[He,(0,t.eW)(":"+(0,s.v_)(l.offer.id),1),Je,Ye,(0,t.eW)(": "+(0,s.v_)(new Date(l.created_at).toLocaleDateString()),1),Ze,(0,t.Lk)("strong",null,"Обьем в "+(0,s.v_)(l.offer.asset.name),1),(0,t.eW)(": "+(0,s.v_)(l.asset_amount)+" ",1),el,ll,(0,t.eW)(": "+(0,s.v_)(l.fiat_amount)+" ₽",1),al,tl,(0,t.bF)(Ge.A,{color:"dark","text-color":"white",label:"В сделку",onClick:a=>e.$router.push(`/p2p/trade/${l.UID}`)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","header-class","caption"])))),128))])),_:1})])),_:1})])),_:1})):(0,t.Q3)("",!0)}}}),sl=nl,ol=sl;q()(nl,"components",{QCard:g.A,QCardSection:y.A,QSeparator:re.A,QList:Be.A,QExpansionItem:ze.A});var ul=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(t.next(e))}catch(l){s(l)}}function u(e){try{r(t["throw"](e))}catch(l){s(l)}}function r(e){e.done?a(e.value):n(e.value).then(o,u)}r((t=t.apply(e,l||[])).next())}))};const rl=(0,t.pM)({__name:"P2POwnOffersTab",setup(e){const{p2pUser:l,getOwnOffers:a,getOwnTrades:s}=(0,u.P)(),o=(0,u.P)();return(0,t.sV)((()=>ul(this,void 0,void 0,(function*(){yield Promise.all([a(),s()])})))),(e,a)=>((0,t.uX)(),(0,t.Wv)(qe.A,{offset:60,loading:(0,n.R1)(o).loading},{default:(0,t.k6)((()=>[(0,t.bF)(Ne,{offers:(0,n.R1)(o).offers},null,8,["offers"]),(0,t.bF)(ol,{trades:(0,n.R1)(o).trades.filter((e=>e.status.is_default)),user:(0,n.R1)(l),title:"Ожидающие согласия сделки"},null,8,["trades","user"]),(0,t.bF)(ol,{trades:(0,n.R1)(o).trades.filter((e=>e.in_progress)),user:(0,n.R1)(l),title:"Активные сделки"},null,8,["trades","user"]),(0,t.bF)(ol,{trades:(0,n.R1)(o).trades.filter((e=>e.status.is_finished)),user:(0,n.R1)(l),title:"Завершенные сделки"},null,8,["trades","user"]),(0,t.bF)(ol,{trades:(0,n.R1)(o).trades.filter((e=>e.status.is_declined)),user:(0,n.R1)(l),title:"Отмененные сделки"},null,8,["trades","user"])])),_:1},8,["loading"]))}}),il=rl,dl=il;var cl=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(t.next(e))}catch(l){s(l)}}function u(e){try{r(t["throw"](e))}catch(l){s(l)}}function r(e){e.done?a(e.value):n(e.value).then(o,u)}r((t=t.apply(e,l||[])).next())}))};const pl=(0,t.Lk)("strong",null,"Дата создания сделки",-1),vl=(0,t.Lk)("br",null,null,-1),fl=(0,t.Lk)("br",null,null,-1),bl=(0,t.Lk)("strong",null,"Объем в рублях",-1),ml=(0,t.Lk)("br",null,null,-1),_l=(0,t.Lk)("br",null,null,-1),kl=(0,t.pM)({__name:"P2PAdminTab",setup(e){const{allTrades:l,getAllTrades:a}=(0,u.P)(),o=(0,u.P)();return(0,t.sV)((()=>cl(this,void 0,void 0,(function*(){yield a()})))),(e,a)=>{const u=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-separator"),i=(0,t.g2)("q-card"),d=(0,t.g2)("q-expansion-item"),c=(0,t.g2)("q-list");return(0,t.uX)(),(0,t.Wv)(qe.A,{offset:60,loading:(0,n.R1)(o).loading},{default:(0,t.k6)((()=>[(0,n.R1)(l).length?((0,t.uX)(),(0,t.Wv)(i,{key:0,flat:"",bordered:"",class:"q-mb-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Активные сделки ")])),_:1}),(0,t.bF)(r),(0,t.bF)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(l),(l=>((0,t.uX)(),(0,t.Wv)(d,{clickable:"",group:"offers",cclass:"item-no-padding",label:`№${l.id} Cтатус: ${l.status.label}`,"header-class":`text-${l.status.color}`,key:l.id},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"bg-tab"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[pl,(0,t.eW)(": "+(0,s.v_)(new Date(l.created_at).toLocaleDateString()),1),vl,(0,t.Lk)("strong",null,"Обьем в "+(0,s.v_)(l.offer.asset.name),1),(0,t.eW)(": "+(0,s.v_)(l.asset_amount)+" ",1),fl,bl,(0,t.eW)(": "+(0,s.v_)(l.fiat_amount),1),ml,_l,(0,t.bF)(Ge.A,{color:"dark","text-color":"white",label:"В сделку",onClick:a=>e.$router.push(`/p2p/trade/${l.UID}`)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","header-class"])))),128))])),_:1})])),_:1})])),_:1})):(0,t.Q3)("",!0)])),_:1},8,["loading"])}}}),gl=kl,yl=gl;q()(kl,"components",{QCard:g.A,QCardSection:y.A,QSeparator:re.A,QList:Be.A,QExpansionItem:ze.A});var Fl=a(29104),hl=a(7711),ql=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(t.next(e))}catch(l){s(l)}}function u(e){try{r(t["throw"](e))}catch(l){s(l)}}function r(e){e.done?a(e.value):n(e.value).then(o,u)}r((t=t.apply(e,l||[])).next())}))};const wl={key:0,class:"text-weight-medium text-body1 q-mb-none"},Ll={class:"text-weight-medium text-body1 q-mb-sm"},xl=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Объем оффера*",-1),Al=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Минимальный объем сделки*",-1),Wl={class:"text-grey-7 q-mb-sm"},Ql=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Условия сделки и дополнительная информация",-1),Vl={key:1,class:"text-weight-medium text-body1"},Cl=(0,t.pM)({__name:"CreateOffer",props:{isSellOffer:{type:Boolean}},setup(e){const{assetsInP2P:l,address:a}=(0,o.G)(),{p2pUser:r,loading:i,createOffer:d}=(0,u.P)(),c=(0,n.KR)(null),p=(0,n.KR)([]),v=e,f={is_sell:!0,amount:null,course:null,min_amount:null,rules:null},b=(0,n.KR)(f),m=(0,t.EW)((()=>{if(b.value.amount&&b.value.course)return parseFloat(String(b.value.amount*b.value.course)).toFixed(2)})),_=()=>ql(this,void 0,void 0,(function*(){var e;yield d(b.value,Number(null===(e=c.value)||void 0===e?void 0:e.key),a,p.value),k()})),k=()=>{c.value=null,p.value=[],b.value.amount=null,b.value.course=null,b.value.min_amount=null,b.value.rules=null};return(0,t.wB)((()=>v.isSellOffer),(e=>{b.value.is_sell=e,k()})),(e,a)=>{var o,u;const d=(0,t.g2)("q-select"),f=(0,t.g2)("q-input"),k=(0,t.g2)("q-form");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(X.A,{"is-sell-list":e.isSellOffer,modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),assets:v.isSellOffer?(0,n.R1)(l).filter((e=>{var l;return(null===(l=e.balance)||void 0===l?void 0:l.own)>0})):(0,n.R1)(l),class:"q-mb-sm"},null,8,["is-sell-list","modelValue","assets"]),c.value?((0,t.uX)(),(0,t.Wv)(d,{key:0,outlined:"",options:null===(o=(0,n.R1)(r))||void 0===o?void 0:o.payment_types,modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),dense:"","dropdown-icon":"las la-angle-down","use-chips":"",class:"q-mb-md",behavior:"menu",multiple:"",label:"Выберите платежные системы"},null,8,["options","modelValue"])):(0,t.Q3)("",!0),(null===(u=p.value)||void 0===u?void 0:u.length)>0?((0,t.uX)(),(0,t.Wv)(k,{key:1,onSubmit:(0,Fl.D$)(_,["prevent"])},{default:(0,t.k6)((()=>{var l,o;return[e.isSellOffer?((0,t.uX)(),(0,t.CE)("p",wl,"Доступный баланс: "+(0,s.v_)(null===(l=c.value)||void 0===l?void 0:l.balance.own),1)):(0,t.Q3)("",!0),(0,t.Lk)("p",Ll,"Текущий курс: "+(0,s.v_)(null===(o=c.value)||void 0===o?void 0:o.course)+" ₽",1),xl,(0,t.bF)(hl.A,{modelValue:b.value.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.amount=e),"margin-bottom":!1,type:"number",clearable:"","lazy-rules":"",rules:[e=>e&&e.length>0&&0!==parseFloat(e)||"Это обязательное поле",e.isSellOffer?e=>{var l;return parseFloat(e)<=parseFloat(String(null===(l=c.value)||void 0===l?void 0:l.balance.own))||"Неможет быть больше баланса"}:null]},null,8,["modelValue","rules"]),Al,(0,t.bF)(hl.A,{modelValue:b.value.min_amount,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value.min_amount=e),type:"number",clearable:"","margin-bottom":!1,"lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>parseFloat(e)<=parseFloat(String(b.value.amount))||"Неможет быть больше объема оффера"]},null,8,["modelValue","rules"]),(0,t.Lk)("p",Wl,(0,s.v_)(e.isSellOffer?"Продать":"Купить")+" по курсу*",1),(0,t.bF)(hl.A,{modelValue:b.value.course,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value.course=e),type:"number",clearable:"","margin-bottom":!1,"lazy-rules":"",rules:[e=>e&&e.length>0&&0!==parseFloat(e)||"Это обязательное поле"]},null,8,["modelValue","rules"]),Ql,(0,t.bF)(f,{outlined:"",modelValue:b.value.rules,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value.rules=e),class:"q-mb-lg",type:"textarea"},null,8,["modelValue"]),m.value?((0,t.uX)(),(0,t.CE)("p",Vl,"Стоимость оффера "+(0,s.v_)(m.value)+" ₽",1)):(0,t.Q3)("",!0),(0,t.bF)(Ge.A,{label:"Создать оффер",type:"submit",class:"invertBtn",loading:(0,n.R1)(i)},null,8,["loading"])]})),_:1})):(0,t.Q3)("",!0)],64)}}});var Rl=a(21565),Pl=a(68926);const Xl=Cl,Sl=Xl;q()(Cl,"components",{QSelect:me.A,QForm:Rl.A,QInput:Pl.A});const $l=(0,t.pM)({__name:"P2PNewOfferTab",setup(e){const l=[{label:"Продать",value:"sell"},{label:"Купить",value:"buy"}],a=(0,n.KR)();return(e,n)=>{const s=(0,t.g2)("q-select");return(0,t.uX)(),(0,t.Wv)(qe.A,{offset:60},{default:(0,t.k6)((()=>{var e,o;return[(0,t.bF)(s,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),dense:"",outlined:"",options:l,label:"Выберите тип оффера",class:"q-mb-sm",behavior:"menu","dropdown-icon":"las la-angle-down"},null,8,["modelValue"]),(null===(e=a.value)||void 0===e?void 0:e.value)?((0,t.uX)(),(0,t.Wv)(Sl,{key:0,"is-sell-offer":"sell"===(null===(o=a.value)||void 0===o?void 0:o.value)},null,8,["is-sell-offer"])):(0,t.Q3)("",!0)]})),_:1})}}}),Tl=$l,Ul=Tl;q()($l,"components",{QSelect:me.A});const Kl=(0,t.pM)({__name:"index",setup(e){const l=(0,n.KR)("p2p"),{p2pUser:a}=(0,u.P)();return(e,s)=>{const o=(0,t.g2)("q-tab"),u=(0,t.g2)("q-tabs"),r=(0,t.g2)("q-separator"),i=(0,t.g2)("q-tab-panel"),d=(0,t.g2)("q-tab-panels"),c=(0,t.g2)("q-card"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{padding:"",class:"page"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{flat:"",bordered:"",class:"full-height"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),"indicator-color":"transparent",class:"shadow-2",align:"justify","active-color":"dark","active-bg-color":"tab"},{default:(0,t.k6)((()=>{var e;return[(0,t.bF)(o,{"no-caps":"",name:"p2p",label:"P2P"}),(0,t.bF)(o,{"no-caps":"",name:"new_offer",label:"Новый оффер"}),(0,t.bF)(o,{"no-caps":"",name:"own",label:"Мои предложения и сделки"}),(null===(e=(0,n.R1)(a))||void 0===e?void 0:e.is_p2p_admin)?((0,t.uX)(),(0,t.Wv)(o,{key:0,"no-caps":"",name:"admin",label:"Раздел админа"})):(0,t.Q3)("",!0)]})),_:1},8,["modelValue"]),(0,t.bF)(r),(0,t.bF)(d,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value=e),animated:"",class:"full-height"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{name:"p2p",class:"overflow-hidden"},{default:(0,t.k6)((()=>[(0,t.bF)(he)])),_:1}),(0,t.bF)(i,{name:"new_offer",class:"overflow-hidden"},{default:(0,t.k6)((()=>[(0,t.bF)(Ul)])),_:1}),(0,t.bF)(i,{name:"own",class:"overflow-hidden"},{default:(0,t.k6)((()=>[(0,t.bF)(dl)])),_:1}),(0,t.bF)(i,{name:"admin",class:"overflow-hidden"},{default:(0,t.k6)((()=>[(0,t.bF)(yl)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}});var Ol=a(33177);const El=Kl,Il=El;q()(Kl,"components",{QPage:Ol.A,QCard:g.A,QTabs:ie.A,QTab:de.A,QSeparator:re.A,QTabPanels:ce.A,QTabPanel:pe.A})}}]);