"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[389],{33389:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var t=a(61758),u=a(38734),s=a(58790),n=a(59033),o=a(24029),d=a(29104),r=a(77474),i=a(77854),c=a(95522),v=a(94461),m=a(81750),p=function(e,l,a,t){function u(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function n(e){try{d(t.next(e))}catch(l){s(l)}}function o(e){try{d(t["throw"](e))}catch(l){s(l)}}function d(e){e.done?a(e.value):u(e.value).then(n,o)}d((t=t.apply(e,l||[])).next())}))};const b={key:0,class:""},k={key:1,class:""},_={class:"q-mb-sm text-caption text-bold"},f={key:2,class:""},y={class:"q-mb-sm text-caption text-bold"},g={key:3},F={class:"q-mb-sm text-caption"},h={class:"q-mb-sm text-caption"},w={key:1,class:"text-center text-positive text-bold"},A=(0,t.Lk)("br",null,null,-1),V=(0,t.Lk)("br",null,null,-1),x=500,q=(0,t.pM)({__name:"NonRub",props:{asset:{}},setup(e){const{toast:l,Icon:a,Color:o}=(0,c.d)(),{getFee:q,signTransaction:Q}=(0,r.Z)(),W=(0,n.G)(),R=e,U=[{label:"На адрес кошелька в другой сети (Конвертация в USDT для RupayRUB)",value:"address"}],X=(0,u.KR)(),C=(0,u.KR)(null),$=(0,u.KR)(!1),E=(0,u.KR)(!1),K=(0,u.KR)({asset:null,amount:null,wallet_rupay:null,address:null,network:null,card:null,phone:null,bank:null,fio:null,payment_details:null}),T=(0,t.EW)((()=>{if(R.asset)return parseFloat(parseFloat(R.asset.course)-parseFloat(R.asset.course)*parseFloat(R.asset.buy_commission)).toFixed(0)})),L=()=>p(this,void 0,void 0,(function*(){$.value=!$.value;const e=yield q(R.asset.key,C.value,"7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP","Вывод","Вывод");if(e.success){const t=yield Q(e.raw);if(m.log(t),t.success){let e="";e="address"===X.value.value?`\nЗапрос на вывод c кошелька ${W.address}:%0A\nНа адрес  ${K.value.address}%0A\nСеть ${K.value.network}%0A\nСумма ${C.value} ${R.asset.name}%0A`:`\nЗапрос на вывод в РУБЛЯХ c кошелька ${W.address}:%0A\nСумма ${C.value} ${R.asset.name}%0A\nСумма в RUB исходная ${parseFloat(C.value*R.asset.course).toFixed(0)} %0A\nСумма в RUB к получению ${parseFloat(C.value*T.value).toFixed(0)} %0A\n`,m.log(e);const u=yield i.nodeApi.post("/api/data/rub_withdrawal",{asset_key:R.asset.key,wallet:W.address,amount:parseFloat(C.value*T.value).toFixed(0),amount_init:C.value,payment_details:e,payment_type:X.value.value,id:t.result.signature});u.data.success?(E.value=!0,l("Ваша заявка на вывод принята.<br>Ваши средства будут отправлены на указанные вами реквизиты<br> в течении нескольких дней",a.success,o.success)):l(u.data.message.message,a.error,o.error),yield v.A.get(`https://api.telegram.org/bot603507616:AAEmmGeaujFe_lqkw31HHSoh2EiAvVNtFA4/sendMessage?chat_id=-542426502\n  &text=${e}`),l("Запрос успешно отправлен",a.success,o.success)}}$.value=!$.value}));return(e,l)=>{const a=(0,t.g2)("q-select"),u=(0,t.g2)("q-input"),n=(0,t.g2)("q-btn"),o=(0,t.g2)("q-form");return(0,t.uX)(),(0,t.Wv)(o,{onSubmit:(0,d.D$)(L,["prevent"])},{default:(0,t.k6)((()=>{var o;return[E.value?((0,t.uX)(),(0,t.CE)("p",w,[(0,t.eW)("Ваша заявка на вывод принята."),A,(0,t.eW)("Ваши средства будут отправлены на указанные"),V,(0,t.eW)(" вами реквизиты в течении нескольких дней")])):((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(a,{outlined:"",options:U,modelValue:X.value,"onUpdate:modelValue":l[0]||(l[0]=e=>X.value=e),behavior:"menu",label:"Выберите тип вывода","lazy-rules":"",rules:[e=>e||"Это обязательное поле"]},null,8,["modelValue","rules"]),X.value&&"address"===X.value.value?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(u,{class:"q-mb-sm",outlined:"",modelValue:K.value.network,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value.network=e),label:"Название сети","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{class:"q-mb-sm",outlined:"",modelValue:K.value.address,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value.address=e),label:"Адрес кошелька","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"])])):(0,t.Q3)("",!0),X.value&&"card"===X.value.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(u,{outlined:"",modelValue:K.value.card,"onUpdate:modelValue":l[3]||(l[3]=e=>K.value.card=e),mask:"#### #### #### ####","fill-mask":"#",label:"Введите номер карты","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,t.Lk)("p",_,"Вы получите "+(0,s.v_)(parseFloat(C.value*T.value).toFixed(0))+" RUB",1)])):(0,t.Q3)("",!0),X.value&&"sbp"===X.value.value?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(u,{outlined:"",modelValue:K.value.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>K.value.phone=e),mask:"+7###########",label:"Введите номер телефона получателя","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{outlined:"",modelValue:K.value.bank,"onUpdate:modelValue":l[5]||(l[5]=e=>K.value.bank=e),label:"Введите название банка получателя","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{outlined:"",modelValue:K.value.fio,"onUpdate:modelValue":l[6]||(l[6]=e=>K.value.fio=e),label:"Введите ФИО получателя","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,t.Lk)("p",y,"Вы получите "+(0,s.v_)(parseFloat(C.value*T.value).toFixed(0))+" RUB",1)])):(0,t.Q3)("",!0),X.value?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.Lk)("p",F,"Ваш баланс "+(0,s.v_)((null===(o=e.asset.balance)||void 0===o?void 0:o.own)?e.asset.balance.own:"0")+" "+(0,s.v_)(e.asset.name),1),(0,t.Lk)("p",h,"Минимальная сумма вывода "+(0,s.v_)(x/T.value)+" "+(0,s.v_)(e.asset.name),1),(0,t.bF)(u,{class:"q-mb-md",outlined:"",modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=e=>C.value=e),type:"number",step:"0.00001",label:"Сумма вывода"},null,8,["modelValue"]),(0,t.bF)(n,{color:"primary",loading:$.value,type:"submit",disable:!C.value||parseFloat(C.value*T.value)<x,unelevated:"","no-caps":"",class:"full-width q-py-md",label:"Отправить"},null,8,["loading","disable"])])):(0,t.Q3)("",!0)],64))]})),_:1})}}});var Q=a(21565),W=a(88515),R=a(68926),U=a(69001),X=a(98582),C=a.n(X);const $=q,E=$;C()(q,"components",{QForm:Q.A,QSelect:W.A,QInput:R.A,QBtn:U.A});var K=function(e,l,a,t){function u(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,s){function n(e){try{d(t.next(e))}catch(l){s(l)}}function o(e){try{d(t["throw"](e))}catch(l){s(l)}}function d(e){e.done?a(e.value):u(e.value).then(n,o)}d((t=t.apply(e,l||[])).next())}))};const T={key:0,class:"text-bold text-center"},L=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Выберите актив",-1),S=(0,t.pM)({__name:"index",setup(e){const{person:l,allAssets:a,address:d}=(0,n.G)(),r=(0,u.KR)(),c=(0,u.KR)("withdrawal"),v=(0,u.KR)([]);return(0,t.KC)((()=>K(this,void 0,void 0,(function*(){const e=yield i.nodeApi.get(`/api/data/withdrawal_history/${d}`);v.value=e.data})))),(e,n)=>{const d=(0,t.g2)("q-tab"),i=(0,t.g2)("q-tabs"),m=(0,t.g2)("q-separator"),p=(0,t.g2)("q-tab-panel"),b=(0,t.g2)("q-item-section"),k=(0,t.g2)("q-item"),_=(0,t.g2)("q-list"),f=(0,t.g2)("q-tab-panels"),y=(0,t.g2)("q-card"),g=(0,t.g2)("q-page"),F=(0,t.gN)("touch-swipe"),h=(0,t.gN)("auto-animate");return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(g,{padding:"",class:"page"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{flat:"",bordered:"",class:"full-height"},{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(i,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),"indicator-color":"transparent",class:"shadow-2",align:"justify","active-color":"dark","active-bg-color":"tab"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{"no-caps":"",name:"withdrawal",label:"Вывод"}),(0,t.bF)(d,{"no-caps":"",name:"history",label:"История"})])),_:1},8,["modelValue"])),[[F]]),(0,t.bF)(m),(0,t.bF)(f,{modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value=e),animated:""},{default:(0,t.k6)((()=>[(0,t.bF)(p,{name:"withdrawal"},{default:(0,t.k6)((()=>[(0,u.R1)(l)?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[L,(0,t.bF)(o.A,{class:"q-mb-md",assets:(0,u.R1)(a).filter((e=>e.can_withdrawal)),"is-withdrawal-list":"",onAssetSelected:n[1]||(n[1]=e=>r.value=e)},null,8,["assets"])],64)):((0,t.uX)(),(0,t.CE)("p",T,"Вывод доступен только верифицированным пользователям")),r.value?((0,t.uX)(),(0,t.Wv)(E,{key:2,asset:r.value},null,8,["asset"])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(p,{name:"history"},{default:(0,t.k6)((()=>[(0,t.bF)(_,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Дата/Время")])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Актив")])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Сумма RUB")])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Статус")])),_:1})])),_:1}),(0,t.bF)(m),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,(e=>((0,t.uX)(),(0,t.Wv)(k,{key:e.id},{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(new Date(e.created_at).toLocaleString()),1)])),_:2},1024),(0,t.bF)(b,null,{default:(0,t.k6)((()=>{var l;return[(0,t.eW)((0,s.v_)(null===(l=e.asset)||void 0===l?void 0:l.name),1)]})),_:2},1024),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.amount)+" RUB",1)])),_:2},1024),null===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:0,class:"text-grey-5"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0),!0===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:1,class:"text-positive"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0),!1===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:2,class:"text-negative"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})),[[h]])}}});var z=a(33177),B=a(97569),P=a(64873),D=a(26721),I=a(37015),N=a(64082),G=a(63815),j=a(54514),M=a(75329),H=a(63418),J=a(35724);const Z=S,O=Z;C()(S,"components",{QPage:z.A,QCard:B.A,QTabs:P.A,QTab:D.A,QSeparator:I.A,QTabPanels:N.A,QTabPanel:G.A,QList:j.A,QItem:M.A,QItemSection:H.A}),C()(S,"directives",{TouchSwipe:J.A})}}]);