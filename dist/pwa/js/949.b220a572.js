"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[949],{36949:(e,t,l)=>{l.r(t),l.d(t,{default:()=>q});var n=l(61758),a=l(38734),u=l(29104),o=l(58790),r=l(60455),i=l(59033),s=l(3388),d=l(7711),v=l(7757),c=l(52664),m=l(2177),p=l(81750),_=function(e,t,l,n){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,u){function o(e){try{i(n.next(e))}catch(t){u(t)}}function r(e){try{i(n["throw"](e))}catch(t){u(t)}}function i(e){e.done?l(e.value):a(e.value).then(o,r)}i((n=n.apply(e,t||[])).next())}))};const y=(0,n.Lk)("br",null,null,-1),b={class:"text-grey-7 q-mb-sm"},g=(0,n.Lk)("p",{class:"text-center no-margin"},"С учетом комиссии вы получите",-1),f={class:"text-center text-h6 text-bold"},k=5e3,h=25e4,w=(0,n.pM)({__name:"fiat",setup(e){const t=(0,r.lq)(),{newPayment:l,loading:w}=(0,c.Z)(),x=(0,i.G)(),F=x.getAssetByKey(t.params.asset_key),R=(0,a.KR)(),A=(0,n.EW)((()=>(null===F||void 0===F?void 0:F.buy_course)>0?null===F||void 0===F?void 0:F.buy_course:null===F||void 0===F?void 0:F.course)),L=(0,n.EW)((()=>{let e=parseFloat(parseFloat(A.value)+parseFloat(A.value*(null===F||void 0===F?void 0:F.buy_commission))).toFixed(2);return R.value=e,parseFloat(q.amount/e).toFixed(5)})),q=(0,a.Kh)({wallet:x.address,type:"Card",want_to_buy:null,amount:null,currency:"RUB",asset_id:null===F||void 0===F?void 0:F.key,redirect_url:m.env.PAYMENT_REDIRECT_URL}),E=()=>_(this,void 0,void 0,(function*(){p.log(q),q.want_to_buy=L.value,yield l(q)}));return(e,t)=>{const l=(0,n.g2)("q-form"),r=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(r,{padding:""},{default:(0,n.k6)((()=>{var e;return[(0,n.bF)(s.A,{title:`Покупка ${null===(e=(0,a.R1)(F))||void 0===e?void 0:e.name}`},{default:(0,n.k6)((()=>[(0,n.bF)(l,{onSubmit:(0,u.D$)(E,["prevent"])},{default:(0,n.k6)((()=>{var e;return[(0,n.Lk)("p",{class:"text-grey-7 q-mb-sm"},[(0,n.eW)("Сумма пополнения ₽"),y,(0,n.eW)(),(0,n.Lk)("span",{class:"text-weight-medium text-negative"},"минимум "+(0,o.v_)(k)+"₽ максимум "+(0,o.v_)(h)+"₽")]),(0,n.Lk)("p",b,"Курс покупки "+(0,o.v_)(R.value)+" ₽",1),(0,n.bF)(d.A,{modelValue:q.amount,"onUpdate:modelValue":t[0]||(t[0]=e=>q.amount=e),clearable:"","lazy-rules":"",marginBottom:!1,rules:[e=>e&&e.length>0||"Это обязательное поле",e=>e&&e>=k||`Не менее ${k}₽`,e=>e&&e<=h||`Не более ${h}₽`]},null,8,["modelValue","rules"]),g,(0,n.Lk)("p",f,(0,o.v_)(L.value)+" "+(0,o.v_)(null===(e=(0,a.R1)(F))||void 0===e?void 0:e.name),1),(0,n.bF)(v.A,{class:"invertBtn",label:"Купить",loading:(0,a.R1)(w),type:"submit"},null,8,["loading"])]})),_:1})])),_:1},8,["title"])]})),_:1})}}});var x=l(33177),F=l(21565),R=l(98582),A=l.n(R);const L=w,q=L;A()(w,"components",{QPage:x.A,QForm:F.A})}}]);