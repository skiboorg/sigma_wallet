"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[438],{93438:(e,l,a)=>{a.r(l),a.d(l,{default:()=>T});var u=a(61758),n=a(38734),t=a(58790),o=a(29104),v=a(60455),i=a(40702),d=a(79432),s=a(41640),r=a(7711),p=a(7757);const m={class:"address"},_={class:"link"},c={__name:"LinkToAddress",props:["address","label_text"],setup(e){return(l,a)=>{const n=(0,u.g2)("router-link");return(0,u.uX)(),(0,u.CE)("span",m,[(0,u.bF)(n,{to:`/scan/search/address/${e.address}`},{default:(0,u.k6)((()=>[(0,u.Lk)("span",_,(0,t.v_)(e.label_text?e.label_text:e.address),1)])),_:1},8,["to"])])}}},b=c,f=b;var y=function(e,l,a,u){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,t){function o(e){try{i(u.next(e))}catch(l){t(l)}}function v(e){try{i(u["throw"](e))}catch(l){t(l)}}function i(e){e.done?a(e.value):n(e.value).then(o,v)}i((u=u.apply(e,l||[])).next())}))};const g={class:"text-weight-medium text-body2"},k=(0,u.Lk)("br",null,null,-1),w=(0,u.Lk)("br",null,null,-1),F=(0,u.Lk)("br",null,null,-1),h=(0,u.Lk)("br",null,null,-1),x={key:0,class:"q-mt-sm"},W=(0,u.Lk)("span",{class:"no-margin text-weight-medium text-body2"}," Условия:",-1),q={class:"text-grey-7 q-mb-sm"},A={key:0},L=(0,u.pM)({__name:"offer",setup(e){const{p2pUser:l,getOffer:a,createTrade:m}=(0,s.P)(),_=(0,s.P)(),c=(0,v.lq)(),b=(0,n.KR)(),L=(0,n.KR)(),$={offer_id:null,amount:null,asset_amount_without_commission:null,payment_type:null,opponent:null},E=(0,n.KR)($);(0,u.sV)((()=>y(this,void 0,void 0,(function*(){b.value=yield a(c.params.offer_id)}))));const Q=(0,u.EW)((()=>{var e,a,u;return(null===(e=b.value)||void 0===e?void 0:e.is_sell)?(null===(a=b.value)||void 0===a?void 0:a.user.wallet)===(null===l||void 0===l?void 0:l.wallet):(null===(u=b.value)||void 0===u?void 0:u.user.wallet)!==(null===l||void 0===l?void 0:l.wallet)})),V=(0,u.EW)((()=>{var e;if(L.value){const a=L.value.payment_type.id;return Q.value?null===l||void 0===l?void 0:l.payment_types.filter((e=>e.payment_type.id===a)):null===(e=b.value)||void 0===e?void 0:e.user.payment_types.filter((e=>e.payment_type.id===a))}})),C=(0,u.EW)((()=>{var e,l,a;if(!E.value.amount)return;const u=parseFloat(E.value.amount*(null===(e=b.value)||void 0===e?void 0:e.course)).toFixed(2);return Q.value?`Продать ${E.value.amount} ${null===(l=b.value)||void 0===l?void 0:l.asset.name} на ${u} ₽`:`Купить ${E.value.amount} ${null===(a=b.value)||void 0===a?void 0:a.asset.name} на ${u} ₽`})),P=(0,u.EW)((()=>{if(L.value){const e=L.value.payment_type.id,a=null===l||void 0===l?void 0:l.payment_types.find((l=>l.payment_type.id===e));return!!a}})),S=()=>y(this,void 0,void 0,(function*(){var e;E.value.asset_amount_without_commission=parseFloat(E.value.amount-.01*E.value.amount).toFixed(5),E.value.payment_type=V.value[0].id,E.value.opponent=null===l||void 0===l?void 0:l.wallet,E.value.offer_id=null===(e=b.value)||void 0===e?void 0:e.id,yield m(E.value)}));return(e,l)=>{const a=(0,u.g2)("q-separator"),v=(0,u.g2)("q-card-section"),s=(0,u.g2)("q-select"),m=(0,u.g2)("q-form"),c=(0,u.g2)("q-page");return(0,u.uX)(),(0,u.Wv)(c,{padding:"",id:"page_wrapper"},{default:(0,u.k6)((()=>[(0,u.bF)(d.A,{loading:(0,n.R1)(_).loading},{default:(0,u.k6)((()=>[(0,u.bF)(i.A,{offset:32,target_element_id:"page_wrapper"},{default:(0,u.k6)((()=>[(0,u.bF)(v,{class:"bg-tab q-mb-sm q-pa-sm"},{default:(0,u.k6)((()=>{var e,l,n,o,v,i,d,s,r,p,m,_,c,y,q;return[(0,u.Lk)("span",g," Оффер #"+(0,t.v_)(null===(e=b.value)||void 0===e?void 0:e.id),1),(0,u.bF)(a,{spaced:"sm"}),(0,u.Lk)("span",null,[(0,u.eW)((0,t.v_)((null===(l=b.value)||void 0===l?void 0:l.is_sell)?"Продажа":"Покупка")+" "+(0,t.v_)(null===(n=b.value)||void 0===n?void 0:n.amount)+" "+(0,t.v_)(null===(o=b.value)||void 0===o?void 0:o.asset.name),1),k,(0,u.eW)(" Минимальный объем "+(0,t.v_)(null===(v=b.value)||void 0===v?void 0:v.min_amount)+" "+(0,t.v_)(null===(i=b.value)||void 0===i?void 0:i.asset.name),1),w,(0,u.eW)(" Курс "+(0,t.v_)((null===(d=b.value)||void 0===d?void 0:d.is_sell)?"продажи":"покупки")+" "+(0,t.v_)(null===(s=b.value)||void 0===s?void 0:s.course)+" ₽",1),F,(0,u.eW)(" Разместил "),(0,u.bF)(f,{address:null===(r=b.value)||void 0===r?void 0:r.user.wallet,label_text:(null===(p=b.value)||void 0===p?void 0:p.user.fio)?null===(m=b.value)||void 0===m?void 0:m.user.fio:null===(_=b.value)||void 0===_?void 0:_.user.wallet},null,8,["address","label_text"]),h,(0,u.eW)(" Проведено сделок: "+(0,t.v_)(null===(c=b.value)||void 0===c?void 0:c.user.total_trades),1)]),(null===(y=b.value)||void 0===y?void 0:y.rules)?((0,u.uX)(),(0,u.CE)("div",x,[W,(0,u.bF)(a,{spaced:"sm"}),(0,u.eW)(" "+(0,t.v_)(null===(q=b.value)||void 0===q?void 0:q.rules),1)])):(0,u.Q3)("",!0)]})),_:1}),(0,u.bF)(m,{onSubmit:(0,o.D$)(S,["prevent"])},{default:(0,u.k6)((()=>{var e,a,n,o;return[(0,u.Lk)("p",q,"Введите объем сделки минимум: "+(0,t.v_)(null===(e=b.value)||void 0===e?void 0:e.min_amount)+" , максимум: "+(0,t.v_)(null===(a=b.value)||void 0===a?void 0:a.amount)+" "+(0,t.v_)(null===(n=b.value)||void 0===n?void 0:n.asset.name)+"*",1),(0,u.bF)(r.A,{modelValue:E.value.amount,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.amount=e),type:"number",clearable:"","margin-bottom":!1,"lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>{var l;return parseFloat(e)<=parseFloat(String(null===(l=b.value)||void 0===l?void 0:l.amount))||"Неможет быть больше объема оффера"},e=>{var l;return parseFloat(e)>=parseFloat(String(null===(l=b.value)||void 0===l?void 0:l.min_amount))||"Неможет быть меньше минимального объема оффера"}]},null,8,["modelValue","rules"]),(0,u.bF)(s,{outlined:"",modelValue:L.value,"onUpdate:modelValue":l[1]||(l[1]=e=>L.value=e),options:null===(o=b.value)||void 0===o?void 0:o.payment_types,dense:"","dropdown-icon":"las la-angle-down",label:"Выберите платежную систему","lazy-rules":"",rules:[e=>e||"Это обязательное поле",e=>P.value||"У вас нет выбранной платежной системы. Добавьте ее в настройках P2P"],behavior:"menu"},null,8,["modelValue","options","rules"]),C.value?((0,u.uX)(),(0,u.CE)("p",A,(0,t.v_)(C.value),1)):(0,u.Q3)("",!0),(0,u.bF)(p.A,{label:"Создать сделку",type:"submit",class:"invertBtn"})]})),_:1})])),_:1})])),_:1},8,["loading"])])),_:1})}}});var $=a(33177),E=a(27066),Q=a(37015),V=a(21565),C=a(88515),P=a(98582),S=a.n(P);const R=L,T=R;S()(L,"components",{QPage:$.A,QCardSection:E.A,QSeparator:Q.A,QForm:V.A,QSelect:C.A})}}]);