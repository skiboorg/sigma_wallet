"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[750],{63750:(e,a,l)=>{l.r(a),l.d(a,{default:()=>D});var t=l(61758),n=l(38734),i=l(58790),o=l(3388),s=l(19056),u=l(77474),d=l(95522),c=l(7757),r=l(38861),v=l(60455),m=l(59033),p=l(81750),g=l(8522)["Buffer"],b=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,i){function o(e){try{u(t.next(e))}catch(a){i(a)}}function s(e){try{u(t["throw"](e))}catch(a){i(a)}}function u(e){e.done?l(e.value):n(e.value).then(o,s)}u((t=t.apply(e,a||[])).next())}))};const y={key:0,class:"q-mb-lg"},h=(0,t.Lk)("p",{class:"text-center text-weight-medium"},"или",-1),k={key:1,class:""},f=(0,t.Lk)("p",{class:"text-weight-medium"},"Информация о пользователе",-1),w={class:"row q-col-gutter-md q-mb-lg"},R={class:"col-6"},q={class:"col-6"},x=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),L={class:"q-mb-none text-caption"},A=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),C={class:"q-mb-none text-caption"},F=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),_={class:"q-mb-none text-caption"},K=(0,t.Lk)("p",{class:"text-negative"},"Верификация может занять до 1 минуты, пожалуйста не покидайте сраницу до получения ответа от сервера",-1),E={key:1},Q=(0,t.pM)({__name:"verify",setup(e){const a=(0,m.G)(),{toast:l,Icon:Q,Color:V}=(0,d.d)(),{registerPersonCertify:T,signTransaction:X}=(0,u.Z)(),P=(0,v.rd)(),W=a.getOwnAssetByKey("1");let I=(0,n.KR)(!1),B=(0,n.KR)(null),D=(0,n.KR)(),S=(0,n.KR)(),U=(0,n.KR)();const G=()=>b(this,void 0,void 0,(function*(){p.log(D.value),B.value&&H(),D.value&&(yield M())})),H=()=>{const e=new FileReader;e.addEventListener("load",(()=>b(this,void 0,void 0,(function*(){D.value=e.result,yield M()}))),!1),B.value&&e.readAsText(B.value)},M=()=>b(this,void 0,void 0,(function*(){I.value=!I.value;const e=yield s.EraChain.Type.PersonHuman.parse(D.value);p.log(e),U.value=e,S.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+g.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},I.value=!I.value})),O=()=>b(this,void 0,void 0,(function*(){I.value=!I.value;const e=yield T(U.value);if(p.log(e),e.raw){yield r.era.broadcast(e.raw);l("Пользователь верифицирован",Q.success,V.success),yield P.back()}I.value=!I.value}));return(e,a)=>{const l=(0,t.g2)("q-file"),s=(0,t.g2)("q-input"),u=(0,t.g2)("q-img"),d=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(d,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(o.A,{title:"Верифицировать пользователя"},{default:(0,t.k6)((()=>{var e;return[parseFloat(null===(e=(0,n.R1)(W))||void 0===e?void 0:e.balance.own)>=1e3?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,n.R1)(U)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",y,[(0,t.bF)(l,{modelValue:(0,n.R1)(B),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(B)?B.value=e:B=e),accept:".txt",dense:"",label:"Выберите файл с RAW кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),h,(0,t.bF)(s,{class:"q-mb-md",outlined:"",modelValue:(0,n.R1)(D),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(D)?D.value=e:D=e),type:"textarea",dense:"",label:"Вставьте RAW код"},null,8,["modelValue"]),(0,t.bF)(c.A,{onClick:G,"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Проверить RAW"})])),(0,n.R1)(S)?((0,t.uX)(),(0,t.CE)("div",k,[f,(0,t.Lk)("div",w,[(0,t.Lk)("div",R,[(0,t.bF)(u,{src:(0,n.R1)(S).image},null,8,["src"])]),(0,t.Lk)("div",q,[x,(0,t.Lk)("p",L,(0,i.v_)((0,n.R1)(S).name),1),A,(0,t.Lk)("p",C,(0,i.v_)(0===(0,n.R1)(S).gender?"М":"Ж"),1),F,(0,t.Lk)("p",_,(0,i.v_)(new Date((0,n.R1)(S).birthday).toLocaleDateString()),1)])]),K,(0,t.bF)(c.A,{onClick:O,loading:(0,n.R1)(I),"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Верифицировать"},null,8,["loading"])])):(0,t.Q3)("",!0)],64)):((0,t.uX)(),(0,t.CE)("p",E,"Для верификации других пользователей на балансе должно быть не менее 1000 "))]})),_:1})])),_:1})}}});var V=l(33177),T=l(68433),X=l(68926),P=l(65287),W=l(98582),I=l.n(W);const B=Q,D=B;I()(Q,"components",{QPage:V.A,QFile:T.A,QInput:X.A,QImg:P.A})}}]);